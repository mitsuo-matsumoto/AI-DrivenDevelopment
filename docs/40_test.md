# 40_test.md

# テスト設計書

本書では、タスク管理Webアプリにおけるテスト観点およびテストケースを定義する。  
本アプリはフロント単体構成だが、将来API化を前提とした業務ロジック中心の設計とする。

---

# 1. テスト方針

## 1.1 テストレベル

| レベル | 対象 |
|--------|------|
| 単体テスト | reducer（状態遷移ロジック） |
| 結合テスト | UI + state連携 |
| 業務ロジックテスト | 完了後24時間削除など |

---

# 2. タスク関連テスト

## 2.1 タスク登録

| No | 観点 | 入力 | 期待結果 |
|----|------|------|----------|
| T-01 | 正常登録 | titleあり | タスクが追加される |
| T-02 | title未入力 | 空文字 | 登録不可 |
| T-03 | title100文字 | 100文字 | 登録成功 |
| T-04 | title101文字 | 101文字 | エラー |
| T-05 | 初期ステータス | 登録直後 | status = "TODO" |
| T-06 | 日付設定 | 登録直後 | createdAt, updatedAtが現在UTC |

---

## 2.2 タスク更新

| No | 観点 | 入力 | 期待結果 |
|----|------|------|----------|
| T-07 | タイトル変更 | 更新実行 | updatedAt更新 |
| T-08 | description更新 | 更新実行 | updatedAt更新 |

---

## 2.3 ステータス変更

| No | 観点 | 操作 | 期待結果 |
|----|------|------|----------|
| T-09 | TODO→IN_PROGRESS | 変更 | status更新 |
| T-10 | IN_PROGRESS→DONE | 変更 | completedAt設定 |
| T-11 | DONE→TODO | 戻す | completedAt=null |
| T-12 | DONE→IN_PROGRESS | 戻す | completedAt=null |

---

## 2.4 完了タスク自動削除

| No | 観点 | 条件 | 期待結果 |
|----|------|------|----------|
| T-13 | 24時間未満 | DONE直後 | 削除されない |
| T-14 | 24時間以上 | DONEから25時間 | 削除される |
| T-15 | TODO状態 | createdAt古い | 削除されない |

---

# 3. カテゴリ関連テスト

## 3.1 カテゴリ登録

| No | 観点 | 入力 | 期待結果 |
|----|------|------|----------|
| C-01 | 正常登録 | 名前あり | 登録成功 |
| C-02 | 空文字 | "" | 登録不可 |
| C-03 | 重複名 | 同名登録 | エラー |

---

## 3.2 カテゴリ削除

| No | 観点 | 条件 | 期待結果 |
|----|------|------|----------|
| C-04 | 未使用カテゴリ | 削除 | 正常削除 |
| C-05 | 使用中カテゴリ | 削除 | タスクのcategoryId=null |

---

# 4. タグ関連テスト

## 4.1 タグ登録

| No | 観点 | 入力 | 期待結果 |
|----|------|------|----------|
| G-01 | 正常登録 | 名前あり | 登録成功 |
| G-02 | 重複名 | 同名 | エラー |

---

## 4.2 タグ削除

| No | 観点 | 条件 | 期待結果 |
|----|------|------|----------|
| G-03 | 使用中タグ | 削除 | タスクのtagIdsから除外 |
| G-04 | 未使用タグ | 削除 | 正常削除 |

---

# 5. LocalStorage関連

| No | 観点 | 条件 | 期待結果 |
|----|------|------|----------|
| L-01 | 初回起動 | 保存なし | 初期state生成 |
| L-02 | 保存あり | 正常JSON | 復元成功 |
| L-03 | JSON破損 | 不正JSON | 初期state起動 |

---

# 6. 境界値テスト

| No | 観点 | 条件 | 期待結果 |
|----|------|------|----------|
| B-01 | タスク0件 | 起動 | 正常表示 |
| B-02 | タスク大量 | 1000件 | 表示可能 |
| B-03 | タグ大量 | 100件 | UI崩れなし |

---

# 7. 将来API化想定テスト観点

- 不正ステータス値受信時のフォールバック
- null値混入時の防御処理
- ID重複時の挙動

---

# 8. テスト優先度

| 優先度 | 対象 |
|--------|------|
| 高 | タスク追加・更新・削除 |
| 中 | カテゴリ・タグ操作 |
| 低 | UI表示差分 |

---
